# 三賢会議アプリ - 設定・仕様書

**作成日:** 2026年1月24日  
**バージョン:** 1.0  

---

## 📱 アプリ基本情報

### アプリ名

| 項目 | 内容 | 理由 |
|:---|:---|:---|
| **日本語名** | 三賢会議（さんけんかいぎ） | ・3人の賢者による合議制を直感的に表現<br>・覚えやすく、口頭でも伝えやすい<br>・「三」が視覚的にも印象的 |
| **英語名** | Triad Council | ・「Triad」= 三位一体、3つの要素<br>・「Council」= 会議、評議会<br>・グローバル展開時にも通用する名称 |
| **略称** | 三賢 / TC | SNSハッシュタグやブランディングに使用 |

### サブタイトル

| 言語 | サブタイトル |
|:---|:---|
| **日本語** | 3つの視点で、迷いを終わらせる |
| **英語** | Three perspectives. One decision. |

**選定理由:**
- ユーザーベネフィットを明確に表現
- 短く、記憶に残りやすい
- アプリのコア価値（合議制による意思決定）を端的に伝える

---

## 🆔 技術的識別子

### Bundle ID / Application ID

```
com.sankenkaigi.app
```

**構成:**
- **com**: 標準的なトップレベルドメイン
- **sankenkaigi**: アプリ名のローマ字表記（ドメイン取得も推奨）
- **app**: アプリケーション識別子

**代替案:**
- `jp.co.sankenkaigi.app`（日本企業の場合）
- `com.triadcouncil.app`（英語名を優先する場合）

### SKU（Stock Keeping Unit）

```
SANKEN-KAIGI-001
```

**用途:** App Store Connect内部での管理用識別子

---

## 📂 カテゴリ・年齢制限

### App Store / Google Playカテゴリ

| ストア | プライマリカテゴリ | セカンダリカテゴリ |
|:---|:---|:---|
| **App Store** | ライフスタイル（Lifestyle） | 仕事効率化（Productivity） |
| **Google Play** | ライフスタイル（Lifestyle） | 仕事効率化（Productivity） |

**選定理由:**
- **ライフスタイル**: 日常の意思決定支援という性質
- **仕事効率化**: ビジネス判断にも使えるツール性
- 「ユーティリティ」よりも「ライフスタイル」の方がダウンロード数が伸びやすい

### 年齢制限

```
4+（全年齢対象）
```

**理由:**
- 暴力的・性的コンテンツなし
- ギャンブル要素なし
- AIが生成するコンテンツは一般的な助言のみ
- 最大限のユーザー層にリーチ可能

**注意事項:**
- AIが不適切な回答を生成しないようフィルタリング実装が必要
- ユーザー生成コンテンツ（相談内容）は他ユーザーに公開しない設計

---

## 🌍 配信地域・価格・マネタイズ

### 配信地域

**フェーズ1（ローンチ時）:**
```
日本のみ
```

**理由:**
- 日本語UIに最適化
- 日本市場でのPMF（Product-Market Fit）を優先
- サポート対応を日本語に限定してコスト削減

**フェーズ2（3〜6ヶ月後）:**
```
アジア圏: 韓国、台湾、シンガポール
英語圏: アメリカ、イギリス、カナダ、オーストラリア
```

### 価格モデル

```
基本無料（フリーミアム）
```

### 課金・マネタイズ戦略

#### 無料プラン（Free Tier）

| 項目 | 制限 |
|:---|:---|
| **相談回数** | 1日3回まで |
| **履歴保存** | 直近10件まで |
| **広告表示** | あり（決議書表示後にインタースティシャル広告） |
| **AI人格カスタマイズ** | 不可 |
| **エクスポート機能** | なし（画像保存のみ） |

#### プレミアムプラン（Premium）

| 項目 | 内容 | 価格 |
|:---|:---|:---|
| **月額サブスクリプション** | 無制限相談、広告なし、全機能解放 | **¥480/月** |
| **年額サブスクリプション** | 月額の2ヶ月分お得 | **¥4,800/年**（月額換算¥400） |

**プレミアム特典:**
- ✅ 無制限相談
- ✅ 広告非表示
- ✅ 無制限履歴保存
- ✅ AI人格カスタマイズ（名前、口調、厳しさ）
- ✅ 決議書のPDF/画像エクスポート
- ✅ 価値観スライダー（論理重視 ↔ 感情重視）
- ✅ 優先サポート

#### 追加課金（オプション）

| アイテム | 価格 | 内容 |
|:---|:---|:---|
| **人格スキンパック** | ¥250 | 特定テーマの口調・テンプレート（例：恋愛特化、転職特化） |
| **判断傾向レポート** | ¥500 | 過去の相談から自分の判断傾向を分析 |

### 広告戦略（無料ユーザー向け）

| 広告タイプ | 表示タイミング | 頻度 |
|:---|:---|:---|
| **インタースティシャル広告** | 決議書表示後 | 1回の相談につき1回 |
| **リワード広告（オプション）** | 「広告を見て1回追加相談」 | ユーザーの選択制 |

**広告ネットワーク:**
- **Google AdMob**（推奨）
- **Unity Ads**（代替）

**収益予測:**
- 無料ユーザー1人あたり: 月¥50〜100（広告収益）
- プレミアムユーザー1人あたり: 月¥480（サブスク収益）
- 目標コンバージョン率: 5%（無料→プレミアム）

---

## 📱 対応OS・端末・言語

### 対応OS最小バージョン

| プラットフォーム | 最小バージョン | 理由 |
|:---|:---|:---|
| **iOS** | iOS 13.0以降 | ・約95%のiOSデバイスをカバー<br>・SwiftUI、Combine等のモダンAPI対応<br>・iPhone 6s以降をサポート |
| **Android** | Android 7.0（API Level 24）以降 | ・約90%のAndroidデバイスをカバー<br>・Material Design 3対応<br>・Flutter推奨最小バージョン |

### 対応端末

| プラットフォーム | 対応端末 |
|:---|:---|
| **iOS** | iPhone 6s以降、iPad（第5世代以降）、iPad Pro全機種 |
| **Android** | 画面サイズ: 4.7インチ以上、RAM: 2GB以上 |

**タブレット対応:**
- フェーズ1: スマートフォンのみ最適化
- フェーズ2: タブレットレイアウト対応（横画面、マルチカラム）

### 対応言語

**フェーズ1（ローンチ時）:**
```
日本語のみ
```

**フェーズ2（3〜6ヶ月後）:**
```
- 日本語
- 英語
- 韓国語（オプション）
- 中国語（簡体字・繁体字）（オプション）
```

**ローカライゼーション方針:**
- UIテキスト: Flutter Intl / ARB形式
- AIプロンプト: 言語ごとに最適化されたプロンプトを用意
- 決議書フォーマット: 文化に応じた表現調整

---

## 🔗 URL設定

### プライバシーポリシーURL

```
https://sankenkaigi.com/privacy
```

**必須記載事項:**
- 収集する個人情報（メールアドレス、相談内容）
- OpenAI APIへのデータ送信に関する説明
- データ保存期間・削除方法
- Cookie・トラッキング技術の使用
- 第三者広告ネットワーク（AdMob）の使用
- ユーザーの権利（アクセス、削除、訂正）
- 連絡先

**重要:** App Store / Google Play申請前に必ず公開すること

### サポートURL

```
https://sankenkaigi.com/support
```

**含めるべきコンテンツ:**
- よくある質問（FAQ）
- 使い方ガイド
- トラブルシューティング
- お問い合わせフォーム
- バグ報告フォーム

### マーケティングURL

```
https://sankenkaigi.com
```

**ランディングページ構成:**
- ヒーローセクション（アプリ紹介動画・スクリーンショット）
- 主要機能の説明
- ユーザーの声（ローンチ後）
- ダウンロードボタン（App Store / Google Play）
- プレスキット（メディア向け）

**ドメイン取得:**
- `sankenkaigi.com`（推奨）
- `triadcouncil.com`（英語版用）

---

## 🛠️ 技術スタック最終選定

### バックエンド

**選定: Node.js + Express**

```javascript
技術スタック:
- ランタイム: Node.js 20 LTS
- フレームワーク: Express 4.18+
- 言語: TypeScript 5.3+
- HTTPクライアント: Axios
- バリデーション: Zod
- ロギング: Winston
```

**理由:**
- ✅ 高速・軽量
- ✅ JavaScriptエコシステムが豊富
- ✅ Vercel / Railwayで簡単にデプロイ可能
- ✅ OpenAI公式SDKがNode.js対応
- ✅ 開発者が多く、トラブルシューティングが容易

**代替案（Python + FastAPI）:**
- より型安全性が高い
- データサイエンス系の拡張が容易
- ただし、デプロイがNode.jsより複雑

### データベース

**選定: Firebase Firestore**

```
技術スタック:
- データベース: Cloud Firestore
- 認証: Firebase Authentication
- ストレージ: Firebase Cloud Storage（将来的な画像保存用）
- アナリティクス: Firebase Analytics
- クラッシュレポート: Firebase Crashlytics
```

**理由:**
- ✅ リアルタイム同期
- ✅ スケーラブル（従量課金）
- ✅ Firebase Authと統合が容易
- ✅ オフライン対応が標準
- ✅ セットアップが簡単
- ✅ 無料枠が大きい（月間50,000読み取り、20,000書き込み）

**データモデル:**
```
collections/
├── users/
│   └── {userId}/
│       ├── profile
│       ├── subscription
│       └── consultations/ (サブコレクション)
│           └── {consultationId}
└── analytics/
    └── {date}/
```

**代替案（PostgreSQL）:**
- より複雑なクエリが可能
- RDBMSの方が慣れている開発者が多い
- ただし、ホスティング・スケーリングが複雑

### ホスティング

**バックエンドAPI: Vercel**

```
プラン: Hobby（無料）→ Pro（$20/月）
リージョン: Tokyo (nrt1)
デプロイ方法: GitHub連携（mainブランチへのpushで自動デプロイ）
```

**理由:**
- ✅ Node.js/TypeScriptに最適化
- ✅ 自動HTTPS、CDN、エッジネットワーク
- ✅ ゼロダウンタイムデプロイ
- ✅ 環境変数管理が簡単
- ✅ 無料枠が大きい

**代替案:**
- **Railway**: PostgreSQLを使う場合に最適
- **AWS Lambda + API Gateway**: より細かい制御が可能だが複雑
- **Google Cloud Run**: Dockerコンテナベース、スケーラブル

### 認証方式

**選定: Firebase Authentication（複数方式対応）**

#### 認証方式の優先順位

**1. ゲスト認証（匿名ログイン）**
```
実装: Firebase Anonymous Authentication
```

**メリット:**
- ✅ ユーザー登録なしで即座に使える
- ✅ ダウンロード→即利用の摩擦を最小化
- ✅ 履歴をローカルに保存（Hive）
- ✅ 後からメールアドレスでアカウント紐付け可能

**制限:**
- アプリを削除すると履歴が消える
- 複数デバイス間での同期不可

**2. メールアドレス認証**
```
実装: Firebase Email/Password Authentication
```

**メリット:**
- ✅ 複数デバイスで履歴同期
- ✅ アプリ削除後も履歴保持
- ✅ パスワードリセット機能

**3. ソーシャルログイン（SSO）**
```
実装: 
- Google Sign-In（優先度: 高）
- Apple Sign-In（iOS必須）
- LINE Login（日本市場向け、優先度: 中）
```

**メリット:**
- ✅ ワンタップでログイン
- ✅ パスワード管理不要
- ✅ ユーザーの信頼性が高い

**Apple Sign-In:**
- iOS向けアプリで他のSSOを提供する場合、Apple Sign-Inの実装が必須（App Store審査ガイドライン）

#### 認証フロー

**初回起動時:**
```
[アプリ起動]
    ↓
[ゲスト認証で自動ログイン]
    ↓
[相談を開始]
    ↓
（任意）[アカウント作成を促すバナー表示]
```

**アカウント作成のタイミング:**
- 3回目の相談後に「履歴を保存しますか?」と促す
- プレミアムプラン購入時に必須

---

## 🔐 セキュリティ・プライバシー

### データ保護

| データ | 保存場所 | 暗号化 | 保存期間 |
|:---|:---|:---|:---|
| **相談内容** | Firestore | TLS通信、保存時暗号化 | ユーザーが削除するまで |
| **AI応答** | Firestore | TLS通信、保存時暗号化 | ユーザーが削除するまで |
| **ユーザープロフィール** | Firestore | TLS通信、保存時暗号化 | アカウント削除まで |
| **ローカル履歴（ゲストモード）** | Hive（端末内） | AES-256暗号化 | アプリ削除まで |

### OpenAI APIとのデータ共有

**重要:** プライバシーポリシーに明記すること

```
ユーザーの相談内容は、AI処理のためにOpenAI社のAPIに送信されます。
OpenAI社のデータ使用ポリシー:
- APIリクエストデータは30日間保存され、その後削除されます
- モデルのトレーニングには使用されません（2023年3月以降）
- 詳細: https://openai.com/policies/api-data-usage-policies
```

### ユーザーデータ削除

**実装:**
- 設定画面に「アカウント削除」ボタンを配置
- 削除時に全ての相談履歴、プロフィールを完全削除
- 削除後は復元不可であることを警告

---

## 📊 アナリティクス・モニタリング

### 使用ツール

| ツール | 用途 |
|:---|:---|
| **Firebase Analytics** | ユーザー行動分析、リテンション、コンバージョン |
| **Firebase Crashlytics** | クラッシュレポート、エラートラッキング |
| **Sentry**（オプション） | より詳細なエラートラッキング |
| **Mixpanel**（将来的） | ファネル分析、A/Bテスト |

### 追跡するKPI

| KPI | 目標値 |
|:---|:---|
| **DAU（デイリーアクティブユーザー）** | 1,000人（3ヶ月後） |
| **リテンション率（7日）** | 30%以上 |
| **リテンション率（30日）** | 15%以上 |
| **無料→プレミアムコンバージョン率** | 5%以上 |
| **1ユーザーあたりの平均相談数** | 週2回以上 |
| **App Storeレーティング** | 4.5以上 |
| **クラッシュフリー率** | 99.5%以上 |

---

## 🎨 ブランディング・マーケティング

### ブランドカラー

| 用途 | カラー | 16進数 |
|:---|:---|:---|
| **プライマリ** | パープル | `#8B7FFF` |
| **セカンダリ** | ライトブルー | `#5B9FFF` |
| **アクセント1** | 論理（青） | `#4A5FD9` |
| **アクセント2** | 共感（ピンク） | `#FF6B9D` |
| **アクセント3** | 直感（黄色） | `#FFB800` |

### ロゴ・アイコン

**アプリアイコン:**
- 1024x1024px（App Store用）
- 512x512px（Google Play用）
- 3つの円（または三角形）を組み合わせたデザイン
- 各円に論理・共感・直感のアイコンを配置
- 背景グラデーション（パープル→ブルー）

**ロゴタイプ:**
- Noto Sans JP Bold
- 「三賢会議」の文字を中央に配置
- 英語版: "Triad Council"

### マーケティングチャネル

**ローンチ時:**
- App Store / Google Playストアページ最適化（ASO）
- X（Twitter）公式アカウント
- Instagram公式アカウント
- TikTok（アプリ使用例の短尺動画）
- Product Hunt掲載

**ローンチ後:**
- VTuber、ライフハック系インフルエンサーへのPR
- ユーザーレビューのシェア
- 「AIに人生相談してみた」系のコンテンツ拡散

---

## 📅 開発・リリーススケジュール

### マイルストーン

| フェーズ | 期間 | 内容 |
|:---|:---|:---|
| **フェーズ1: MVP開発** | 2〜3週間 | コア機能実装（ホーム、審議、決議書、履歴） |
| **フェーズ2: テスト** | 1週間 | バグ修正、パフォーマンス最適化 |
| **フェーズ3: ストア申請** | 1〜2週間 | App Store / Google Play申請、審査待ち |
| **フェーズ4: ローンチ** | 1日 | 一般公開、マーケティング開始 |
| **フェーズ5: 改善** | 継続 | ユーザーフィードバック反映、機能追加 |

**目標リリース日:** 2026年2月中旬

---

## ✅ 設定チェックリスト

### ストア申請前に準備するもの

#### App Store
- [ ] Apple Developer Account（$99/年）
- [ ] アプリアイコン（1024x1024px）
- [ ] スクリーンショット（6.7", 6.5", 5.5"の3サイズ）
- [ ] プレビュー動画（オプション、推奨）
- [ ] アプリ説明文（日本語・英語）
- [ ] キーワード（100文字以内）
- [ ] プライバシーポリシーURL
- [ ] サポートURL
- [ ] マーケティングURL
- [ ] App Store審査用テストアカウント

#### Google Play
- [ ] Google Play Developer Account（$25、一度限り）
- [ ] アプリアイコン（512x512px）
- [ ] フィーチャーグラフィック（1024x500px）
- [ ] スクリーンショット（最低2枚、推奨8枚）
- [ ] プロモーション動画（YouTubeリンク、オプション）
- [ ] アプリ説明文（短文80文字、長文4000文字）
- [ ] プライバシーポリシーURL
- [ ] コンテンツレーティング質問票

---

## 📝 修正・確認事項

以下の項目について、ご確認・修正をお願いします：

### 1. アプリ名
- [ ] 日本語名「三賢会議」で確定？
- [ ] 英語名「Triad Council」で確定？
- [ ] 別の案がある場合は記入してください: _______________

### 2. Bundle ID
- [ ] `com.sankenkaigi.app`で確定？
- [ ] ドメイン`sankenkaigi.com`を取得予定？
- [ ] 別のBundle IDを希望する場合: _______________

### 3. 配信地域
- [ ] 日本のみでローンチ？
- [ ] 初回から他の地域も含める場合: _______________

### 4. 課金モデル
- [ ] 月額¥480、年額¥4,800で確定？
- [ ] 別の価格設定を希望する場合: _______________

### 5. 技術スタック
- [ ] Node.js + Firebaseで確定？
- [ ] PostgreSQLやPythonを希望する場合は記入: _______________

### 6. 認証方式
- [ ] ゲスト認証（匿名）を優先？
- [ ] 初回からメールアドレス必須にする？
- [ ] Apple Sign-In / Google Sign-Inを実装？

### 7. URL
- [ ] ドメイン`sankenkaigi.com`を取得予定？
- [ ] 既存のドメインを使用する場合: _______________

---

## 🎯 次のステップ

1. **この設定書をレビュー**
   - 上記の修正・確認事項を埋める
   - 変更したい項目があれば指摘

2. **ドメイン取得**
   - `sankenkaigi.com`を取得（推奨: Cloudflare、Google Domains）

3. **Apple Developer / Google Play Developerアカウント作成**
   - Apple: https://developer.apple.com/programs/
   - Google: https://play.google.com/console/signup

4. **プライバシーポリシー作成**
   - テンプレートを使用して作成
   - 弁護士レビュー（推奨）

5. **実装開始**
   - 前回作成した実装指示書を使用
   - バックエンド→フロントエンドの順で実装

---

**この設定書は随時更新してください。**
